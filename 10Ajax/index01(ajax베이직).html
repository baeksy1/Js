<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script>

        //동기->순차적으로 실행
        //비동기->비순차적으로 실행

        // console.log(1);

        // fetch('hi.txt').then(function(reponse){
        //     reponse.text().then(function(text){
        //         console.log(text)
        //     })
        // })
        // console.log(2);


        //2nd
        //fetch를 사용하면 promise객체를 반환(상태를 가지고 있는 객체)
        //pending = 대기중
        //fulfilled = 성공
        //     //reject = 실패
        //    var promise= fetch('hi.txt');
        //     promise.then()//then절 안엔 콜백function을 쓰면 됨.

        // //promise객체 안에는 then(콜백) 함수를 사용할 수 있다
        // //콜백함수 = 콜했을 대 백 받을 약속된 함수
        // fetch('hi.txt').then(function(response){
        //     console.log(response)
        // })//then안에는 실행결과를 받을 콜백함수가 들어간다.



        //text()는 body에 있는 데이터를 문자열로 변환 - ㄱreturn:promise객체
        //json()는 body에 있느 데이터를 object로 변환 - return:promise객체

        // fetch('hi.txt').then(function (response) {
        //     console.log(response.text())//promise반환

          
        // })

        // fetch('hi.txt').then(function (response) {

        //     //아래 코드는 성공일때만 실행해야됨
        //     //보통 if문으로 조건을 건다
        //     // response.text().then(function (data) {
        //     //     console.log(data)
        //     // })
        //     if(response.status!=200){
        //         alert('통신에 실패')
        //         return;
        //     }
        //     response.text().then(function (data) {
        //         console.log(data)
        //     })
        // })
        

            fetch('hi.txt').then(console.log)
            console.log

        //응용버전
       fetch('hi.txt').then(function(response){
            if(response.status!=200){
                console.log('통신에 실패했습니다');
                return;
            }
            console.log(response.text())
            return response.text();//이 결과는 fetch함수의 return 으로 연결로 간다
        }).then(function(data){
            console.log(data+1);
            return data;
        }).then(function(data){
            console.log(data+2);

            return "data123";
        }).then(function(data){
            console.log(data+3);

            return ;
        }).catch(function(e){
            console.log(e)//에러 발생시 실행됨.
        })
   
            console.log(fetch('hi.txt'))


    </script>

</body>

</html>